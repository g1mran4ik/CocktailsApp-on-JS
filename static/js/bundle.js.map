{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,+BAA+B,aAAa;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC,sBAAsB;AAC5D,2DAA2D,oBAAoB;AAC/E;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA,KAAK;AACL,GAAG;AACH;;AAEA,iEAAe,YAAY;;;;;;;;;;;;;;ACtH3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kDAAkD;AAClD;AACA,iBAAiB;;AAEjB;AACA;AACA,YAAY,0BAA0B;;AAEtC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,uBAAuB;AACtC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;;AAGA,iEAAe,IAAI,EAAC;;;;;;;;;;;;;;;ACzKpB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,6BAA6B;AACpE,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA,iEAAe,KAAK,EAAC;;;;;;;;;;;;;;;AC5BrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,mCAAmC,KAAK,GAAG;AAC3C;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oBAAoB,mBAAmB;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,mDAAmD,OAAO;AAC1D;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA,mDAAmD,OAAO;AAC1D;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,qDAAqD,OAAO;;AAE5D;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA,iEAAe,MAAM,EAAC;;;;;;;;UC9ItB;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;ACNmD;AAChB;AACE;AACE;AACvC;AACA;AACA,EAAE,yDAAI;AACN,EAAE,0DAAK;AACP,EAAE,2DAAM;AACR,EAAE,iEAAY;AACd,CAAC;AACD","sources":["webpack:///./static/modules/allcocktails.js","webpack:///./static/modules/main.js","webpack:///./static/modules/modal.js","webpack:///./static/modules/slider.js","webpack:///webpack/bootstrap","webpack:///webpack/runtime/define property getters","webpack:///webpack/runtime/hasOwnProperty shorthand","webpack:///webpack/runtime/make namespace object","webpack:///./static/src/script.js"],"sourcesContent":["// страничка загруженных коктейлей\nfunction allcocktails() {\n  const generatedCocktails = document.querySelector(\n    \".randomized_cocktail_page\"\n  ),\n  cocktailBlock = document.querySelector(\".cocktail_block\"),\n  randomizeCocktailBlock = document.querySelector(\".txt_button\"),\n  generatedCocktailsButton = document.querySelector(\"#all\"),\n  backHomeButton = document.querySelector(\"#home\"),\n  randomizedCocktailImg = document.querySelector(\".randomized_cocktail_img\"),\n  nextButton = document.querySelector(\".listing_next_all\"),\n  prevButton = document.querySelector(\".listing_prev_all\");\n\n  generatedCocktailsButton.disabled = false;\n\n  let allRandomizedImg = [],\n    allRandomizedNames = [],\n    counter = 15;\n\n  const listingItems = () => {\n    for (let i = counter - 15; i < counter; i++) {\n      if (allRandomizedNames[i] === undefined) {\n        break;\n      }\n      let imageBlock = document.createElement(\"div\");\n      imageBlock.classList.add(\"cocktail_img_block\");\n      imageBlock.innerHTML = `\n      <p class=\"all_cocktails_name\">${allRandomizedNames[i]}</p>\n      <img class=\"img_prev\" style=\"background-image: url(${allRandomizedImg[i]})\">`;\n      randomizedCocktailImg.appendChild(imageBlock);\n    }\n  };\n\n  const showButtonsOnCounter = () => {\n    counter <= 15\n      ? (prevButton.style.display = \"none\")\n      : (prevButton.style.display = \"block\");\n    counter >= allRandomizedNames.length\n      ? (nextButton.style.display = \"none\")\n      : (nextButton.style.display = \"block\");\n  };\n\n  generatedCocktailsButton.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n\n    generatedCocktailsButton.disabled = true;\n\n    cocktailBlock.style.display = \"none\";\n    randomizeCocktailBlock.style.display = \"none\";\n    generatedCocktails.style.display = \"flex\";\n\n    const getAllRandomizedImg = async () => {\n      const responseImg = await fetch(\n        \"http://127.0.0.1:8000/AllGeneratedImg\"\n      ).then((responseImg) => responseImg.json());\n\n      const responseNames = await fetch(\n        \"http://127.0.0.1:8000/AllGeneratedNames\"\n      ).then((responseNames) => responseNames.json());\n\n      allRandomizedNames = responseNames;\n      allRandomizedImg = responseImg;\n\n      listingItems();\n      showButtonsOnCounter();\n    };\n\n    getAllRandomizedImg();\n\n    const deleteBlocks = () => {\n      const imageBlock = document.querySelectorAll(\".cocktail_img_block\");\n      imageBlock.forEach((item) => {\n        randomizedCocktailImg.removeChild(item);\n      });\n    };\n\n    nextButton.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      deleteBlocks();\n\n      counter = counter + 15;\n\n      listingItems();\n\n      showButtonsOnCounter();\n    });\n\n    prevButton.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      deleteBlocks();\n\n      counter = counter - 15;\n\n      listingItems();\n\n      showButtonsOnCounter();\n    });\n\n    backHomeButton.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n\n      cocktailBlock.style.display = \"flex\";\n      randomizeCocktailBlock.style.display = \"block\";\n      generatedCocktails.style.display = \"none\";\n\n      generatedCocktailsButton.disabled = false;\n\n      deleteBlocks();\n\n      counter = 15;\n\n      getData();\n    });\n  });\n}\n\nexport default allcocktails;","function main() {\n  // создаем переменные с которыми будем работать через селектор класса\n  const drinkRandomizeButton = document.querySelector(\".generate_button\"),\n    drinkImg = document.querySelector(\".image\"),\n    drinkName = document.querySelector(\".cocktail_name\"),\n    drinkIngredients = document.querySelector(\".ingreds\"),\n    drinkComment = document.querySelector(\".comment\"),\n    drinkSpinnerBlock = document.querySelector(\".spinner\");\n\n  // создаем функции для присвоения названию и картинке коктейля полученные через запрос данные\n  const buildDrinkImg = (strDrinkThumb) => (drinkImg.src = strDrinkThumb);\n\n  const buildDrinkName = (strDrink) => (drinkName.innerHTML = strDrink);\n\n  // создаем функцию для получения списка ингредиентов из объекта запроса\n  const getIngredients = (randomDrink) =>\n    Object.entries(randomDrink).reduce(\n      (agg, [key, value]) =>\n        value && key.includes(\"strIngredient\") ? [...agg, value] : agg,\n      []\n    );\n\n  // создаем функцию для присвоения ингредиентов полученных через запрос\n  const buildDrinkIngreds = (randomDrink) =>\n    (drinkIngredients.innerHTML = `Ingredients: ${getIngredients(\n      randomDrink\n    ).join(\", \")}`);\n\n  // создаем единую функцию, отвечающую за присвоение названия, картинки и ингредиентов коктейля, полученных через запрос\n  const buildHtml = (randomDrink) => {\n    const { strDrinkThumb, strDrink } = randomDrink;\n\n    buildDrinkImg(strDrinkThumb);\n    buildDrinkName(strDrink);\n    buildDrinkIngreds(randomDrink);\n    buildDrinkComment();\n  };\n\n  async function createLikedObj(like) {\n    const likeData = new Object();\n    likeData.cocktailName = drinkName.innerHTML;\n    likeData.cocktailImg = drinkImg.src;\n    if (like === \"yes\") {\n    likeData.liked = 1;\n    likeData.disliked = 0;\n    } else if (like === \"no\") {\n    likeData.liked = 0;\n    likeData.disliked = 1;\n    } else {\n    likeData.liked = 0;\n    likeData.disliked = 0;\n    }\n\n    const postOptions = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    const response = await fetch(\"http://127.0.0.1:8000/likeData/\", {\n    ...postOptions,\n    body: JSON.stringify(likeData),\n    }).then((response) => response.json());\n\n    listFromBackend = response;\n};\n\n  let fetchTimeoutTimerId = undefined;\n\n  const displayLoading = () => {\n      drinkName.innerHTML = \"Wait a few seconds...\";\n      drinkIngredients.innerHTML = \"Ingredients: will show soon...\";\n      drinkSpinnerBlock.id = \"loading\";\n      drinkSpinnerBlock.classList.add(\"display\");\n      drinkImg.style.display = \"none\";\n  };\n\n  const displayHide = () => {\n      drinkSpinnerBlock.id = \"\";\n      drinkSpinnerBlock.classList.remove(\"display\");\n      drinkImg.style.display = \"block\";\n  };\n\n  let listFromBackend = [];\n\n  const onLoadingEnd = (drinkObj) => {\n      if (listFromBackend.find((listItem) => listItem === drinkObj.strDrink)) {\n      return getData();\n      }\n      displayHide();\n      buildHtml(drinkObj);\n      createLikedObj(\"nothing\");\n  };\n\n  // создаем функцию запроса данных с сервера\n  const getData = () => {\n      let drinkObj = {};\n      let loadingFromSetTimeout = true;\n      let loadingFromFetch = true;\n      displayLoading();\n      fetch(\"https://www.thecocktaildb.com/api/json/v1/1/random.php\")\n      .then((response) => response.json())\n      .then(({ drinks: [randomDrink] }) => {\n          loadingFromFetch = false;\n          drinkObj = randomDrink;\n          !loadingFromSetTimeout && onLoadingEnd(drinkObj);\n      });\n      clearTimeout(fetchTimeoutTimerId);\n      fetchTimeoutTimerId = setTimeout(() => {\n      loadingFromSetTimeout = false;\n      !loadingFromFetch && onLoadingEnd(drinkObj);\n      }, 300);\n  };\n\n  // создаем рандомные фразочки при генерации коктейля\n\n  const phrases = [\n    \"Yaay, this is a really good choice!\",\n    \"It looks like you will got a good weekend!\",\n    \"Not bad!\",\n    \"Ohhh...It looks very tasty!\",\n    \"Yes, it is for you!\",\n    \"Well, maybe you should click button again, if you wish...\",\n    \"Now it seems like you need to go shop!\",\n    \"Why are you so serious...?\",\n    \"And this is only the beginnig!\",\n    \"Do you like this?\",\n  ];\n\n  // задаем функцию, которая рандомит фразу\n  const getRandomComment = (arr) => {\n    let randIndex = Math.floor(Math.random() * arr.length);\n    return arr[randIndex];\n  };\n\n  // задаем функцию, которая будет вставлять текст в html\n  const buildDrinkComment = () => {\n    let randomComment = getRandomComment(phrases);\n    drinkComment.innerHTML = randomComment;\n  };\n\n  // вешаем обработчик события на кнопку\n  drinkRandomizeButton.addEventListener(\"click\", (e) => {\n    e.preventDefault();\n\n    getData();\n  });\n\n  // отправляем json на сервер при нажатии на кнопки лайков\n\n  const likeButton = document.querySelector(\".button_like\"),\n  dislikeButton = document.querySelector(\".button_dislike\");\n\n  likeButton.addEventListener(\"click\", () => {\n  createLikedObj(\"yes\");\n  getData();\n  });\n\n  dislikeButton.addEventListener(\"click\", () => {\n  createLikedObj(\"no\");\n  getData();\n  });\n\n  // вызов функции для первичной загрузки рандомного коктейля на страницу\n  getData();\n}\n\n\nexport default main;\n","// Modal\n\nfunction modal() {\n  const bindModal = () => {\n    const trigger = document.querySelector(\".trigger\"),\n      modal = document.querySelector(\".account_modal\"),\n      close = document.querySelector(\".modal_close\");\n  \n    trigger.addEventListener(\"click\", (e) => {\n      e.target && e.preventDefault();\n      modal.style.display = \"block\";\n    });\n  \n    close.addEventListener(\"click\", () => (modal.style.display = \"none\"));\n  \n    modal.addEventListener(\"click\", (e) => {\n      if (e.target === modal) {\n        modal.style.display = \"none\";\n      }\n      // можно ещё так\n      // e.target === modal && (() => {modal.style.display = \"none\"})()\n    });\n  };\n  \n  bindModal();\n  // modal ends\n}\n\nexport default modal;\n","// Slider\nfunction slider() {\n  // определяем селектор для контейнера\n  const imageContainer = document.querySelector(\".image_container\");\n\n  let favouriteCocktailsImg = [];\n\n  // устанавливаем начальные значения ширины, начального положения и индекса слайда\n  let offset = 0,\n    slideIndex = 1,\n    width = \"160px\";\n\n  const getFavouriteDrinksImg = async () => {\n    const response = await fetch(\"http://127.0.0.1:8000/mostPopular\").then(\n      (response) => response.json()\n    );\n\n    favouriteCocktailsImg = response;\n\n    favouriteCocktailsImg.forEach((item) => {\n      let block = document.createElement(\"div\");\n      block.classList.add(\"image_slider\");\n      block.style.cssText = `\n          background-image: url('${item}');`;\n      imageContainer.appendChild(block);\n    });\n\n    // определяем селекторы блока слайдера и контейнера для картинок\n    const slides = document.querySelectorAll(\".image_slider\"),\n      slider = document.querySelector(\".slider\"),\n      // определяем селектор для контейнера\n      slidesField = document.querySelector(\".image_container\");\n    // задаем стили для конейнера\n    slidesField.style.width = 100 * slides.length + \"%\";\n    slidesField.style.display = \"flex\";\n    slidesField.style.transition = \"0.5s all\";\n\n    // создаем функцию для создания слайдера и пустой массив для нижней панели переключения\n    const indicators = document.createElement(\"ol\"),\n      dots = [];\n\n    indicators.classList.add(\"carousel_indicators\");\n    slider.appendChild(indicators);\n\n    // создаем элементы нижнего блока основываясь на количестве слайдов\n    for (let i = 0; i < slides.length; i++) {\n      const dot = document.createElement(\"listItem\");\n      dot.setAttribute(\"data-slide-to\", i + 1);\n\n      if (i == 0) {\n        dot.style.opacity = 1;\n      }\n      indicators.appendChild(dot);\n      dots.push(dot);\n    }\n\n    // Добавляем функцию для замены неЦифр на пустые символы (для удобства подстановки положения без px и прочего)\n    function deleteNotDigits(str) {\n      return +str.replace(/\\D/g, \"\");\n    }\n\n    const translateImageXNext = () => {\n      if (offset === deleteNotDigits(width) * (slides.length - 1)) {\n        offset = 0;\n      } else {\n        offset += deleteNotDigits(width);\n      }\n      // перемещаем контейнер относительно изначальной позиции, чтобы наши картинки слайдились\n      slidesField.style.transform = `translateX(-${offset}px)`;\n    };\n\n    const setCurrentDotPositionNext = () => {\n      // определяем номер слайда из всей длины слайдов\n      if (slideIndex == slides.length) {\n        slideIndex = 1;\n      } else {\n        slideIndex++;\n      }\n      // ставим отображение нижнего блока переключения слайдов\n      dots.forEach((dot) => (dot.style.opacity = \".5\"));\n      dots[slideIndex - 1].style.opacity = 1;\n    };\n\n    const translateImageXPrev = () => {\n      if (offset == 0) {\n        offset = deleteNotDigits(width) * (slides.length - 1);\n      } else {\n        offset -= deleteNotDigits(width);\n      }\n\n      slidesField.style.transform = `translateX(-${offset}px)`;\n    };\n\n    const setCurrentDotPositionPrev = () => {\n      if (slideIndex == 1) {\n        slideIndex = slides.length;\n      } else {\n        slideIndex--;\n      }\n\n      dots.forEach((dot) => (dot.style.opacity = \".5\"));\n      dots[slideIndex - 1].style.opacity = 1;\n    };\n\n    const dotEventListener = (dot) => {\n      dot.addEventListener(\"click\", (e) => {\n        const slideTo = e.target.getAttribute(\"data-slide-to\");\n\n        slideIndex = slideTo;\n\n        offset = deleteNotDigits(width) * (slideTo - 1);\n\n        slidesField.style.transform = `translateX(-${offset}px)`;\n\n        dots.forEach((dot) => (dot.style.opacity = \".5\"));\n        dots[slideTo - 1].style.opacity = 1;\n      });\n    };\n\n    // заводим переменные для кнопок\n    const next = document.querySelector(\".slider_next\");\n\n    // вешаем на кнопки обработчик\n    next.addEventListener(\"click\", () => {\n      translateImageXNext();\n      setCurrentDotPositionNext();\n    });\n\n    const prev = document.querySelector(\".slider_prev\");\n\n    prev.addEventListener(\"click\", () => {\n      translateImageXPrev();\n      setCurrentDotPositionPrev();\n    });\n\n    dots.forEach((dot) => dotEventListener(dot));\n  };\n\n  getFavouriteDrinksImg();\n  // конец слайдера\n}\n\nexport default slider;\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import allcocktails from \"../modules/allcocktails\";\r\nimport main from \"../modules/main\";\r\nimport modal from \"../modules/modal\";\r\nimport slider from \"../modules/slider\";\r\n\r\nwindow.addEventListener(\"DOMContentLoaded\", () => {\r\n  main();\r\n  modal();\r\n  slider();\r\n  allcocktails();\r\n});\r\n\r\n"],"names":[],"sourceRoot":""}